<h2 class="text-primary my-3">Gestion de personnes</h2>

<h3 class="text-secondary my-3">Ajouter une nouvelle personne</h3>

<form (ngSubmit)="ajouter()" #form="ngForm">
  <label for="lastname" class="form-label">Nom</label>
  <input type="text" id="lastname" #nom="ngModel" name="lastname" class="form-control" [(ngModel)]="personne.nom" required>

  @if(nom.invalid && nom.dirty) {
    <div class="col-auto">
    <span id="lastname" class="form-text">
      Ce champs est requis.
    </span>
  </div>
  }

  <label for="firstname" class="form-label">Prénom</label>
  <input type="text" id="firstname" #prenom="ngModel" name="firstname" class="form-control" [(ngModel)]="personne.prenom" required>

  @if(prenom.invalid && prenom.dirty) {
    <div class="col-auto">
    <span id="firstname" class="form-text">
      Ce champs est requis.
    </span>
  </div>
  }

  <label for="age" class="form-label">Âge</label>
  <input type="number" id="age" #age="ngModel" name="age" class="form-control" [(ngModel)]="personne.age" max="120" required>

  @if(age.invalid && age.dirty) {
    <div class="col-auto">
    <span id="age" class="form-text">
      Ce champs est requis et doit contenir une valeur inférieure à 120.
    </span>
  </div>
  }

  <button class="btn btn-outline-secondary mt-2" [disabled]="form.invalid">Soumettre</button>
</form>

<h3 class="text-secondary my-3">Liste des personnes</h3>
<ul class="list-group list-group-flush">
  @for (p of personnes(); track $index) {
    <li class="list-group-item">
     {{ p.prenom }} {{ p.nom }} - {{ p.age }} ans 
      <button type="button" (click)="supprimer(p.id)" class="btn">
          <i class="fa-solid fa-trash-can text-danger"></i>
        </button>
  </li>
  }  
</ul>